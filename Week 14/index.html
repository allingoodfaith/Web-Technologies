<!DOCTYPE html>

<html>
    <head>
        <meta charset="utf-8">
        <title>My first three.js app</title>
        <style>
            body { margin: 0; }
            canvas { display: block; }
        </style>
    </head>
    <body>
        <script src="libs/three.min.js"></script>
        <script src="libs/OBJLoader.js"></script>
        <script src="libs/TrackballControls.js"></script>
        <script src="libs/GLTFLoader.js"></script>

        <script>

                var geometry = new THREE.BoxGeometry();
                var material = new THREE.MeshBasicMaterial({
                    color: 0x00ff00
                });
                var cube = new THREE.Mesh(geometry, material);
                scene.add(cube);

                var geometry = new THREE.BoxGeometry();
                var material = new THREE.MeshBasicMaterial({
                    color: 0x00ff00
                });
                var cube = new THREE.Mesh(geometry, material);
                scene.add(cube);
                
                camera.position.z = 5;

                function animate() {
                    requestAnimationFrame( animate );
                    renderer.render( scene, camera );
                }
                animate();

                cube.rotation.x += 0.01;
                cube.rotation.y += 0.01;

                function animate() {
                    requestAnimationFrame( animate );
                    cube.rotation.x += 0.01;
                    cube.rotation.y += 0.01;
                    renderer.render( scene, camera );
                }
                animate();




            function getScene() {
                var scene = new THREE.Scene();
                scene.background = new THREE.Color(0x111111);
                return scene;
            }

            function getCamera() {
                var aspectRatio = window.innerWidth / window.innerHeight;
                var camera = new THREE.PerspectiveCamera(75, aspectRatio, 0.1, 1000);
                camera.position.set(0, 90, -10);
                return camera;
            }


            function getLight(scene) {
                var light = new THREE.PointLight(0xffffff, 1, 0);
                light.position.set(20, 50, 20);
                scene.add(light);

                var ambientLight = new THREE.AmbientLight(0x111111);
                scene.add(ambientLight);
                return light;
            }


            function getRenderer() {
                // Create the canvas with a renderer
                var renderer = new THREE.WebGLRenderer({antialias: true});
                // Add support for retina displays
                renderer.setPixelRatio(window.devicePixelRatio);
                // Specify the size of the canvas
                renderer.setSize(window.innerWidth, window.innerHeight);
                // Add the canvas to the DOM
                document.body.appendChild(renderer.domElement);
                return renderer;
            }

            function getControls(camera, renderer) {
                var controls = new THREE.TrackballControls(camera, renderer.domElement);
                controls.zoomSpeed = 0.4;
                controls.panSpeed = 0.4;
                return controls;
            }



            function loadModel() {
                var loader = new THREE.GLTFLoader();
                loader.load( 'Crystal.glb', function ( object ) {
                object.rotation.z = Math.PI;
                scene.add( object );
                document.querySelector('h1').style.display = 'none';
                } );
            }


            function render() {
                requestAnimationFrame(render);
                renderer.render(scene, camera);
                controls.update();
            };

            var scene = getScene();
            var camera = getCamera();
            var light = getLight(scene);
            var renderer = getRenderer();
            var controls = getControls(camera, renderer);

            loadModel()

            render();
        </script>
    </body>
</html>

